<!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="card">
  <h2>Data Duplicater</h2>

  <textarea id="input" rows="6" placeholder="Paste data"></textarea>
  <textarea id="output" rows="6"></textarea>

  <button id="dup">Duplicate</button>
  <button id="copy">Copy</button>
  <button id="download">Download CSV</button>
  <button id="logout">Logout</button>
</div>

<script type="module">
import { getDuplicateLocal, saveDuplicateLocal, clearSession } from "./cache.js";

output.value = getDuplicateLocal();

dup.onclick = () => {
  const lines = input.value.split("\n").filter(l => l.trim());
  const out = [];
  lines.forEach(l => { out.push(l); out.push(l); });
  output.value = out.join("\n");
  saveDuplicateLocal(output.value);
};

copy.onclick = () => {
  navigator.clipboard.writeText(output.value);
  alert("Copied");
};

download.onclick = () => {
  const blob = new Blob([output.value], { type: "text/csv" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "duplicated.csv";
  a.click();
};

logout.onclick = () => {
  clearSession();
  location.href = "index.html";
};
</script>

</body>
</html>
