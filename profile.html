<!DOCTYPE html>
<html>
<head>
  <title>Profile Setup</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="card">
  <h2>Profile Setup</h2>

  <input id="name" placeholder="Full Name">
  <input id="phone" placeholder="Phone">
  <input id="age" type="number" placeholder="Age">
  <input id="sheet" placeholder="Google Sheet Link">

  <button id="save">Save Profile</button>
</div>

<script type="module">
  import { getUser, saveProfile, getProfile } from "./local.js";

  const user = getUser();
  if (!user) location.href = "index.html";

  const existing = getProfile();
  if (existing && existing.profileCompleted) {
    location.href = "dashboard.html";
  }

  document.getElementById("save").onclick = () => {
    const profile = {
      name: name.value,
      phone: phone.value,
      age: age.value,
      sheet: sheet.value,
      profileCompleted: true
    };

    saveProfile(profile);
    location.href = "dashboard.html";
  };
</script>

</body>
</html>
